<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Workflow De Editorial Para Publicar en Medium</title>
  <meta name="description" content="En este blog encontraras cosas de iOS, Ruby on Rails, Padrino, reflexiones informáticas y hasta algo de bricolaje.
" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="canonical" href="http://javimoreno.es/blog/2015/10/14/workflow-de-editorial-para-publicar-en-medium/">

  <link rel="shortcut icon" href="/assets/images/favicon.ico">
<!--  <link rel="stylesheet" href=""> -->
  <link rel="stylesheet" href="http://brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href='http://fonts.googleapis.com/css?family=Sanchez:400italic,400' rel='stylesheet' type='text/css'>
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="http://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
	<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38448478-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
	<link href='/stylesheets/all-f3bc542a50c111b30c53480fe133cdd5.css' media='all' rel='stylesheet' type='text/css'>
</head>
  <body itemscope itemtype="http://schema.org/Article">
	 <!-- header start -->

<!-- header end -->
    
    <main class="content" role="main">
      <article class="post">
        <div class="noarticleimage">
          <div class="post-meta">
						 
				  	<h1 class="post-title">Workflow De Editorial Para Publicar en Medium</h1>
				  	 
          </div>
        </div>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4>Javi</h4>
              <p class="bio"></p>
              <hr>
              <p class="published"><i class="fa fa-calendar"></i><time datetime="2015-10-14 01:22"> 14 de octubre de 2015</time></p>
              <p class="published"><i class="fa fa-clock-o"></i>  
              
              
              1 minuto
              
              de lectura
              </p>
            </section>
          </div>
        </div>
        <section class="post-content">
          <a name="topofpage"></a>
          <p>He creado un workflow de Editorial para publicar en Medium. No es que sea algo excesivamente complicado pero creo que puede ser de gran utilidad para los que utilicen este servicio de publicación y quieran probar otras alternativas para cargar sus contenidos. Lo único que se necesita es un token de integración que puedes conseguir en tus ajustes de Medium.</p>

<p><a href="http://www.editorial-workflows.com/workflow/5899384340348928/zDQGLjLUt4s">El workflow puedes verlo o instalarlo desde aquí</a></p>

<!--more-->

<p>No tiene mucha configuración, en el mismo lugar del workflow donde se indica el token de integración se puede seleccionar si la publicación quedará en borrador, se hará publica inmediatamente o no aparecerá listada. </p>

<p><img src="https://photos-2.dropbox.com/t/2/AAAae3fBY3ez-QARusAtr3eMHEGmVIU7YtMiUBP45Q2WyA/12/7383676/png/32x32/1/1444784400/0/2/img_0061.png/CPzUwgMgASACIAMgBSAHKAIoBw/O-YTO-Zw7B-VMaeV6N-9TMfGFBO8wMv4gDHsudVB0WA?size=1024x768&amp;size_mode=2" alt="Detalle del workflow"></p>

<p>El workflow toma un texto en markdown y lo envía a Medium. Antes de esto pedirá confirmación del título de la publicación.  </p>

<p>El script en Python que gobierna el workflow es, con algunas variaciones, el siguiente:</p>

<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kn">import</span> <span class="nn">urllib2</span>                 
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kn">import</span> <span class="nn">json</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">contentTypeHeader</span> <span class="o">=</span> <span class="s">&#39;application/json&#39;</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">acceptHeader</span> <span class="o">=</span>  <span class="s">&#39;application/json&#39;</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">acceptCharsetHeader</span> <span class="o">=</span> <span class="s">&#39;utf-8&#39;</span>
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">integrationToken</span> <span class="o">=</span> <span class="s">&#39;tu propio token de integracion&#39;</span>
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">urlUserInfo</span> <span class="o">=</span> <span class="s">&#39;https://api.medium.com/v1/me&#39;</span>
</div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">urlUserInfo</span><span class="p">)</span>
</div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">,</span> <span class="s">&quot;Bearer </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">integrationToken</span><span class="p">)</span>   
</div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&quot;Content-Type&quot;</span><span class="p">,</span> <span class="n">contentTypeHeader</span><span class="p">)</span>
</div></div><div data-line='14' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&quot;Accept&quot;</span><span class="p">,</span> <span class="n">acceptHeader</span><span class="p">)</span>
</div></div><div data-line='15' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&quot;Accept-Charset&quot;</span><span class="p">,</span> <span class="n">acceptCharsetHeader</span><span class="p">)</span>
</div></div><div data-line='16' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">try</span><span class="p">:</span>
</div></div><div data-line='17' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">response</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div></div><div data-line='18' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">except</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</div></div><div data-line='19' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
</div></div><div data-line='20' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="k">print</span> <span class="s">&quot;The integration token is invalid&quot;</span>
</div></div><div data-line='21' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="k">print</span> <span class="n">e</span><span class="o">.</span><span class="n">reason</span>
</div></div><div data-line='22' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">else</span><span class="p">:</span> 
</div></div><div data-line='23' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">responseJson</span> <span class="o">=</span>  <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</div></div><div data-line='24' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">authorId</span> <span class="o">=</span> <span class="n">responseJson</span><span class="p">[</span><span class="s">&quot;data&quot;</span><span class="p">][</span><span class="s">&quot;id&quot;</span><span class="p">]</span>
</div></div><div data-line='25' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='26' class='code-highlight-row numbered'><div class='code-highlight-line'> <span class="n">urlPost</span> <span class="o">=</span> <span class="s">&#39;https://api.medium.com/v1/users/</span><span class="si">%s</span><span class="s">/posts&#39;</span> <span class="o">%</span> <span class="n">authorId</span>
</div></div><div data-line='27' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='28' class='code-highlight-row numbered'><div class='code-highlight-line'> <span class="n">values</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</div></div><div data-line='29' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">values</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;Hola Medium!&quot;</span>
</div></div><div data-line='30' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">values</span><span class="p">[</span><span class="s">&#39;contentFormath&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;html&quot;</span>
</div></div><div data-line='31' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">values</span><span class="p">[</span><span class="s">&#39;content&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;&lt;h1&gt;Hola Medium!&lt;/h1&gt;&lt;p&gt;Probando el API de Medium desde Pythonista.&lt;/p&gt;&quot;</span>
</div></div><div data-line='32' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">values</span><span class="p">[</span><span class="s">&#39;publishStatus&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;draft&quot;</span> 
</div></div><div data-line='33' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</div></div><div data-line='34' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='35' class='code-highlight-row numbered'><div class='code-highlight-line'> <span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">urlPost</span><span class="p">)</span>
</div></div><div data-line='36' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">,</span> <span class="s">&quot;Bearer </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">integrationToken</span><span class="p">)</span>   
</div></div><div data-line='37' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&quot;Content-Type&quot;</span><span class="p">,</span> <span class="n">contentTypeHeader</span><span class="p">)</span>
</div></div><div data-line='38' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&quot;Accept&quot;</span><span class="p">,</span> <span class="n">acceptHeader</span><span class="p">)</span>
</div></div><div data-line='39' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&quot;Accept-Charset&quot;</span><span class="p">,</span> <span class="n">acceptCharsetHeader</span><span class="p">)</span>
</div></div><div data-line='40' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="n">request</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</div></div><div data-line='41' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="k">try</span><span class="p">:</span>
</div></div><div data-line='42' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="n">response</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div></div><div data-line='43' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="k">except</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</div></div><div data-line='44' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="mi">400</span><span class="p">:</span>
</div></div><div data-line='45' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">print</span> <span class="s">&quot;Incorrect fields. Bad request&quot;</span>
</div></div><div data-line='46' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">print</span> <span class="n">e</span><span class="o">.</span><span class="n">reason</span>
</div></div><div data-line='47' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="k">elif</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
</div></div><div data-line='48' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">print</span> <span class="s">&quot;The integration token is invalid&quot;</span>
</div></div><div data-line='49' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">print</span> <span class="n">e</span><span class="o">.</span><span class="n">reason</span>
</div></div><div data-line='50' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="k">elif</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
</div></div><div data-line='51' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">print</span> <span class="s">&quot;User without permission to publish.&quot;</span>
</div></div><div data-line='52' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">print</span> <span class="n">e</span><span class="o">.</span><span class="n">reason</span>
</div></div><div data-line='53' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="k">elif</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
</div></div><div data-line='54' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">print</span> <span class="s">&quot;User unknown&quot;</span>
</div></div><div data-line='55' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">print</span> <span class="n">e</span><span class="o">.</span><span class="n">reason</span>
</div></div><div data-line='56' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="k">else</span><span class="p">:</span>
</div></div><div data-line='57' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">print</span> <span class="s">&quot;Ups! something is wrong with the world today...&quot;</span>
</div></div><div data-line='58' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">print</span> <span class="n">e</span><span class="o">.</span><span class="n">reason</span>
</div></div><div data-line='59' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="k">else</span><span class="p">:</span> 
</div></div><div data-line='60' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span></div></div></pre></div></figure>

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=Workflow+De+Editorial+Para+Publicar+en+Medium&amp;url=http://kcy.me/284rw"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
              
                <a class="icon-facebook" href="//www.facebook.com/sharer.php?t=Workflow+De+Editorial+Para+Publicar+en+Medium&amp;u=http://kcy.me/284rw"
                  onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
                <i class="fa fa-facebook"></i><span class="hidden">facebook</span>
                </a>
              
            
              
                <a class="icon-linkedin" href="//www.linkedin.com/shareArticle?mini=true&title=Workflow+De+Editorial+Para+Publicar+en+Medium&amp;url=http://kcy.me/284rw"
                  onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;">
                <i class="fa fa-linkedin"></i><span class="hidden">linkedin</span>
                </a>
              
            
          </section>
					
				  <comments class="post-comments">
				    <div id="disqus_thread"></div>
    <script type="text/javascript">
    var disqus_shortname = 'eloctoblog';
    
      
      // var disqus_developer = 1;
      var disqus_identifier = 'http://javimoreno.es/blog/2015/10/14/workflow-de-editorial-para-publicar-en-medium/';
      var disqus_url = 'http://javimoreno.es/blog/2015/10/14/workflow-de-editorial-para-publicar-en-medium/';
      var disqus_script = 'embed.js';
    
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
				  </comments>
					
        </footer>
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/cover-rails.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Javi Moreno</h1>
        <h2 class="blog-description">En este blog encontraras cosas de iOS, Ruby on Rails, Padrino, reflexiones informáticas y hasta algo de bricolaje.
</h2>
        <a href="/" class="btn">Ir a la página principal</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    
      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>
  </body>
</html>
